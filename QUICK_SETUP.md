# ЁЯЪА р╕Бр╕▓р╕гр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╣Бр╕Ър╕Ър╕Зр╣Ир╕▓р╕в - р╣Гр╕Кр╣Й Webhook р╕Чр╕╡р╣Ир╕бр╕╡р╕нр╕вр╕╣р╣Ир╣Бр╕ер╣Йр╕з

## тЬи р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╣Др╕Фр╣Йр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╣Бр╕ер╣Йр╕з

### 1. Environment Variables
р╣Др╕Яр╕ер╣М `.env.local` р╣Др╕Фр╣Йр╕Цр╕╣р╕Бр╕кр╕гр╣Йр╕▓р╕Зр╣Бр╕ер╣Йр╕зр╕Юр╕гр╣Йр╕нр╕б webhook URL р╕Вр╕нр╕Зр╕Др╕╕р╕У:

```env
N8N_WEBHOOK_URL=http://localhost:5678/webhook/39e434db-15ca-4ad7-8757-cad84e629907
N8N_BASE_URL=http://localhost:5678
```

### 2. р╕гр╕░р╕Ър╕Ър╕Чр╕╡р╣Ир╕Юр╕гр╣Йр╕нр╕бр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ
- тЬЕ Webhook Status Component - р╣Бр╕кр╕Фр╕Зр╕кр╕Цр╕▓р╕Щр╕░р╕Бр╕▓р╕гр╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕н
- тЬЕ Chat API - р╣Гр╕Кр╣Й webhook URL р╕Ир╕▓р╕Б environment р╣Вр╕Фр╕вр╕Хр╕гр╕З
- тЬЕ Test Function - р╕Чр╕Фр╕кр╕нр╕Ъ webhook р╣Др╕Фр╣Йр╕Чр╕▒р╕Щр╕Чр╕╡

## ЁЯЪА р╕зр╕┤р╕Шр╕╡р╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 1: р╕гр╕▒р╕Щ n8n (р╕Цр╣Йр╕▓р╕вр╕▒р╕Зр╣Др╕бр╣Ир╣Др╕Фр╣Йр╕гр╕▒р╕Щ)
```bash
# р╣Гр╕Кр╣Й Docker (р╣Бр╕Щр╕░р╕Щр╕│)
docker-compose up -d

# р╕лр╕гр╕╖р╕нр╕гр╕▒р╕Щ n8n р╣Вр╕Фр╕вр╕Хр╕гр╕З
n8n start
```

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 2: р╕гр╕▒р╕Щр╣Вр╕Ыр╕гр╣Ар╕Ир╕Д
```bash
npm run dev
```

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 3: р╣Ар╕Ыр╕┤р╕Фр╣Ар╕Ър╕гр╕▓р╕зр╣Мр╣Ар╕Лр╕нр╕гр╣М
р╣Др╕Ыр╕Чр╕╡р╣И: `http://localhost:3000/chat`

## ЁЯОп р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╕Др╕╕р╕Ур╕Ир╕░р╣Ар╕лр╣Зр╕Щ

### Webhook Status
- ЁЯЯв **Green Badge**: Webhook configured р╣Бр╕ер╕░р╕Юр╕гр╣Йр╕нр╕бр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ
- ЁЯФ┤ **Red Badge**: Webhook р╣Др╕бр╣Ир╣Др╕Фр╣Йр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ р╕лр╕гр╕╖р╕нр╕бр╕╡р╕Ыр╕▒р╕Нр╕лр╕▓
- ЁЯУН **Webhook URL**: р╣Бр╕кр╕Фр╕З URL р╕Чр╕╡р╣Ир╣Гр╕Кр╣Йр╕нр╕вр╕╣р╣И
- ЁЯзк **Test Button**: р╕Чр╕Фр╕кр╕нр╕Ъ webhook р╣Др╕Фр╣Йр╕Чр╕▒р╕Щр╕Чр╕╡

### Chat Interface
- ЁЯТм **Chat Input**: р╕Юр╕┤р╕бр╕Юр╣Мр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╣Ар╕Юр╕╖р╣Ир╕нр╣Ар╕гр╕┤р╣Ир╕бр╕Бр╕▓р╕гр╕кр╕Щр╕Чр╕Щр╕▓
- ЁЯдЦ **AI Response**: р╣Др╕Фр╣Й response р╕Ир╕▓р╕Б n8n workflow р╕Вр╕нр╕Зр╕Др╕╕р╕У
- ЁЯУЭ **Message History**: р╣Ар╕Бр╣Зр╕Ър╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤р╕Бр╕▓р╕гр╕кр╕Щр╕Чр╕Щр╕▓

## ЁЯзк р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ

### 1. р╕Чр╕Фр╕кр╕нр╕Ъ Webhook Status
- р╕Фр╕╣р╕Чр╕╡р╣И header р╕Фр╣Йр╕▓р╕Щр╕Вр╕зр╕▓
- р╕Др╕зр╕гр╣Ар╕лр╣Зр╕Щ green badge "Webhook configured"
- р╕Др╕ер╕┤р╕Б "Test Webhook" р╣Ар╕Юр╕╖р╣Ир╕нр╕Чр╕Фр╕кр╕нр╕Ъ

### 2. р╕Чр╕Фр╕кр╕нр╕Ъ Chat
- р╕Юр╕┤р╕бр╕Юр╣Мр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╣Гр╕Щр╕Кр╣Ир╕нр╕З input
- р╕Бр╕Ф Enter р╕лр╕гр╕╖р╕нр╕Др╕ер╕┤р╕Бр╕Ыр╕╕р╣Ир╕бр╕кр╣Ир╕З
- р╕Др╕зр╕гр╣Др╕Фр╣Й response р╕Ир╕▓р╕Б n8n

### 3. р╕Чр╕Фр╕кр╕нр╕Ъ API р╣Вр╕Фр╕вр╕Хр╕гр╕З
```bash
curl -X POST http://localhost:3000/api/chat \
  -H "Content-Type: application/json" \
  -d '{
    "messages": [
      {"role": "user", "content": "Hello, how are you?"}
    ]
  }'
```

## ЁЯФз р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕Вр╕Ыр╕▒р╕Нр╕лр╕▓

### Webhook р╣Др╕бр╣Ир╕Хр╕нр╕Ър╕кр╕Щр╕нр╕З
1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ n8n р╕Бр╕│р╕ер╕▒р╕Зр╕Чр╕│р╕Зр╕▓р╕Щ
2. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ webhook URL р╣Гр╕Щ `.env.local`
3. р╕Чр╕Фр╕кр╕нр╕Ъ webhook URL р╣Вр╕Фр╕вр╕Хр╕гр╕Зр╣Гр╕Щ n8n

### Build Error
```bash
# р╕ер╕Ъ node_modules р╣Бр╕ер╕░р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕Зр╣Гр╕лр╕бр╣И
rm -rf node_modules package-lock.json
npm install
npm run build
```

### Environment Variables
```bash
# р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Др╕Яр╕ер╣М .env.local
cat .env.local

# р╕Др╕зр╕гр╣Ар╕лр╣Зр╕Щ:
# N8N_WEBHOOK_URL=http://localhost:5678/webhook/39e434db-15ca-4ad7-8757-cad84e629907
# N8N_BASE_URL=http://localhost:5678
```

## ЁЯУ▒ р╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╕Ир╕гр╕┤р╕З

### 1. р╣Ар╕гр╕┤р╣Ир╕бр╕Бр╕▓р╕гр╕кр╕Щр╕Чр╕Щр╕▓
- р╕Юр╕┤р╕бр╕Юр╣Мр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╣Гр╕Щр╕Кр╣Ир╕нр╕З input
- р╕Бр╕Ф Enter р╣Ар╕Юр╕╖р╣Ир╕нр╕кр╣Ир╕З
- р╕гр╕н response р╕Ир╕▓р╕Б n8n

### 2. р╕Фр╕╣р╕кр╕Цр╕▓р╕Щр╕░
- Webhook Status р╣Бр╕кр╕Фр╕Зр╕кр╕Цр╕▓р╕Щр╕░р╕Бр╕▓р╕гр╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕н
- р╕кр╕╡р╣Ар╕Вр╕╡р╕вр╕з = р╕Юр╕гр╣Йр╕нр╕бр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ
- р╕кр╕╡р╣Бр╕Фр╕З = р╕бр╕╡р╕Ыр╕▒р╕Нр╕лр╕▓

### 3. р╕Чр╕Фр╕кр╕нр╕Ър╕гр╕░р╕Ър╕Ъ
- р╕Др╕ер╕┤р╕Б "Test Webhook" р╣Ар╕Юр╕╖р╣Ир╕нр╕Чр╕Фр╕кр╕нр╕Ъ
- р╕Фр╕╣ response р╣Гр╕Щ chat

## ЁЯОЙ р╕кр╕гр╕╕р╕Ы

р╕Хр╕нр╕Щр╕Щр╕╡р╣Йр╕Др╕╕р╕Ур╕бр╕╡:
- тЬЕ **Webhook URL р╕Чр╕╡р╣Ир╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╣Бр╕ер╣Йр╕з** р╣Гр╕Щ `.env.local`
- тЬЕ **р╕гр╕░р╕Ър╕Ъ Chat р╕Чр╕╡р╣Ир╕Юр╕гр╣Йр╕нр╕бр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ** р╣Вр╕Фр╕вр╣Др╕бр╣Ир╕Хр╣Йр╕нр╕Зр╕кр╕гр╣Йр╕▓р╕З workflow р╣Гр╕лр╕бр╣И
- тЬЕ **Webhook Status Component** р╕Чр╕╡р╣Ир╣Бр╕кр╕Фр╕Зр╕кр╕Цр╕▓р╕Щр╕░р╕Бр╕▓р╕гр╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕н
- тЬЕ **Test Function** р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Чр╕Фр╕кр╕нр╕Ъ webhook

**р╕Юр╕гр╣Йр╕нр╕бр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╕Чр╕▒р╕Щр╕Чр╕╡!** ЁЯЪА

р╣Ар╕Юр╕╡р╕вр╕Зр╣Бр╕Др╣И:
1. р╕гр╕▒р╕Щ n8n
2. р╕гр╕▒р╕Щр╣Вр╕Ыр╕гр╣Ар╕Ир╕Д (`npm run dev`)
3. р╣Ар╕Ыр╕┤р╕Фр╣Ар╕Ър╕гр╕▓р╕зр╣Мр╣Ар╕Лр╕нр╕гр╣Мр╣Др╕Ыр╕Чр╕╡р╣И chat page
4. р╣Ар╕гр╕┤р╣Ир╕бр╕Бр╕▓р╕гр╕кр╕Щр╕Чр╕Щр╕▓!

р╕лр╕▓р╕Бр╕бр╕╡р╕Ыр╕▒р╕Нр╕лр╕▓ р╣Гр╕лр╣Йр╕Фр╕╣р╕Чр╕╡р╣И Webhook Status component р╣Гр╕Щ header р╕Фр╣Йр╕▓р╕Щр╕Вр╕зр╕▓ ЁЯШК

